// Frontend Authentication Service\nconst API_BASE_URL = 'http://localhost:5001/api';\n\n// Storage keys\nconst TOKEN_KEY = 'pingme_token';\nconst USER_KEY = 'pingme_user';\n\nclass AuthService {\n  /**\n   * Register new user\n   * @param {Object} userData - {name, email, password}\n   * @returns {Promise<Object>} Response with token and user data\n   */\n  async register(userData) {\n    try {\n      console.log('üìù Registering user:', { email: userData.email, name: userData.name });\n      \n      const response = await fetch(`${API_BASE_URL}/auth/register`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(userData),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.message || 'Registration failed');\n      }\n\n      if (data.success && data.data) {\n        // Store token and user data\n        this.setToken(data.data.token);\n        this.setUser(data.data.user);\n        console.log('‚úÖ Registration successful:', data.data.user.email);\n      }\n\n      return data;\n    } catch (error) {\n      console.error('‚ùå Registration error:', error.message);\n      throw error;\n    }\n  }\n\n  /**\n   * Login user\n   * @param {Object} credentials - {email, password}\n   * @returns {Promise<Object>} Response with token and user data\n   */\n  async login(credentials) {\n    try {\n      console.log('üîë Logging in user:', credentials.email);\n      \n      const response = await fetch(`${API_BASE_URL}/auth/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(credentials),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.message || 'Login failed');\n      }\n\n      if (data.success && data.data) {\n        // Store token and user data\n        this.setToken(data.data.token);\n        this.setUser(data.data.user);\n        console.log('‚úÖ Login successful:', data.data.user.email);\n      }\n\n      return data;\n    } catch (error) {\n      console.error('‚ùå Login error:', error.message);\n      throw error;\n    }\n  }\n\n  /**\n   * Get current authenticated user\n   * @returns {Promise<Object>} Current user data\n   */\n  async getCurrentUser() {\n    try {\n      const token = this.getToken();\n      if (!token) {\n        throw new Error('No authentication token found');\n      }\n\n      console.log('üë§ Fetching current user...');\n      \n      const response = await fetch(`${API_BASE_URL}/auth/me`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        if (response.status === 401) {\n          // Token is invalid, clear storage\n          this.logout();\n          throw new Error('Session expired. Please login again.');\n        }\n        throw new Error(data.message || 'Failed to get user data');\n      }\n\n      if (data.success && data.data) {\n        // Update stored user data\n        this.setUser(data.data.user);\n        console.log('‚úÖ Current user fetched:', data.data.user.email);\n      }\n\n      return data;\n    } catch (error) {\n      console.error('‚ùå Get current user error:', error.message);\n      throw error;\n    }\n  }\n\n  /**\n   * Update user profile\n   * @param {Object} profileData - {name, about, avatar}\n   * @returns {Promise<Object>} Updated user data\n   */\n  async updateProfile(profileData) {\n    try {\n      const token = this.getToken();\n      if (!token) {\n        throw new Error('No authentication token found');\n      }\n\n      console.log('üìù Updating profile...');\n      \n      const response = await fetch(`${API_BASE_URL}/auth/profile`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n        body: JSON.stringify(profileData),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.message || 'Profile update failed');\n      }\n\n      if (data.success && data.data) {\n        // Update stored user data\n        this.setUser(data.data.user);\n        console.log('‚úÖ Profile updated successfully');\n      }\n\n      return data;\n    } catch (error) {\n      console.error('‚ùå Profile update error:', error.message);\n      throw error;\n    }\n  }\n\n  /**\n   * Change user password\n   * @param {Object} passwordData - {currentPassword, newPassword}\n   * @returns {Promise<Object>} Success response\n   */\n  async changePassword(passwordData) {\n    try {\n      const token = this.getToken();\n      if (!token) {\n        throw new Error('No authentication token found');\n      }\n\n      console.log('üîê Changing password...');\n      \n      const response = await fetch(`${API_BASE_URL}/auth/change-password`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n        body: JSON.stringify(passwordData),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        throw new Error(data.message || 'Password change failed');\n      }\n\n      console.log('‚úÖ Password changed successfully');\n      return data;\n    } catch (error) {\n      console.error('‚ùå Password change error:', error.message);\n      throw error;\n    }\n  }\n\n  /**\n   * Logout user (clear local storage and state)\n   */\n  logout() {\n    console.log('üëã Logging out user...');\n    localStorage.removeItem(TOKEN_KEY);\n    localStorage.removeItem(USER_KEY);\n  }\n\n  /**\n   * Check if user is authenticated\n   * @returns {boolean} True if user has valid token\n   */\n  isAuthenticated() {\n    const token = this.getToken();\n    const user = this.getUser();\n    return !!(token && user);\n  }\n\n  /**\n   * Get stored authentication token\n   * @returns {string|null} JWT token\n   */\n  getToken() {\n    return localStorage.getItem(TOKEN_KEY);\n  }\n\n  /**\n   * Set authentication token in storage\n   * @param {string} token - JWT token\n   */\n  setToken(token) {\n    localStorage.setItem(TOKEN_KEY, token);\n  }\n\n  /**\n   * Get stored user data\n   * @returns {Object|null} User object\n   */\n  getUser() {\n    const userData = localStorage.getItem(USER_KEY);\n    return userData ? JSON.parse(userData) : null;\n  }\n\n  /**\n   * Set user data in storage\n   * @param {Object} user - User object\n   */\n  setUser(user) {\n    localStorage.setItem(USER_KEY, JSON.stringify(user));\n  }\n\n  /**\n   * Get authorization headers for API requests\n   * @returns {Object} Headers with authorization\n   */\n  getAuthHeaders() {\n    const token = this.getToken();\n    return {\n      'Content-Type': 'application/json',\n      ...(token && { 'Authorization': `Bearer ${token}` }),\n    };\n  }\n\n  /**\n   * Make authenticated API request\n   * @param {string} endpoint - API endpoint\n   * @param {Object} options - Fetch options\n   * @returns {Promise<Response>} Fetch response\n   */\n  async authenticatedRequest(endpoint, options = {}) {\n    const token = this.getToken();\n    if (!token) {\n      throw new Error('No authentication token found');\n    }\n\n    return fetch(`${API_BASE_URL}${endpoint}`, {\n      ...options,\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`,\n        ...options.headers,\n      },\n    });\n  }\n}\n\n// Export singleton instance\nexport default new AuthService();